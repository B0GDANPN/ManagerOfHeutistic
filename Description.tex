\documentclass[12pt]{article}
\input{Preambles/preamble.tex}
\begin{document}
\begin{flushleft}
\section*{Описание Менеджера эвристик}

Пусть дан большой(от 12 таблиц) аналитический запрос с внутренними соединениями. Для его планирования будем выполнять 
следующие шаги:
\begin{enumerate}
    \item Представим запрос в виде набора связных компонент, любые две таблицы из разных компонент не имеют условия соединения между собой. 
    \item Если компонента содержит от 100 таблиц, то сначала строим быстрый жадный план с помощью GOO, затем оптимизируем полученные поддервья размером до k, пока не исчерпается бюджет.
    \item Если компонента содержит до 100 таблиц, разобьём на топологии: сначала выделим из компоненты \textbf{плотные графы} (с 6+ вершинами), затем циклы(*), звёзды с лучами ограниченной длины, останутся цепи. 
    Звездой назовём группу вершин: центральная и связанные с ней цепи, каждые две цепи не связаны с друг другом в оставшейся топологии. Или если имеется 
    вершина с количеством строк в 10+ раз больше чем у 2+ соседей, то данная вершина станет центральной, а её соседи будут концами цепочек.
    \newline (*)Если после выделения  плотных графов и циклов, компонента остаётся связной, то для планирования этого дерева используем IKKBZ/linDP (т.к позволяет получить очень близкие к оптимальным планы за разумное время), иначе выделяем звёзды и цепи.
    \item Назовём топологию маленькой, если в ней $\leq 12$ элементов, иначе топология большая. Спланируем каждую топологию графа:\newline
    \begin{enumerate}
        \item Для маленькой цепи будем использовать DPsize. Для большой будем linDP.
        \item Для маленького цикла будем использовать DPsize. В большом цикле найдем соединение с наибольшей кардинальностью, и разобьём цикл 
        по этом соединению - уберём одну таблицу в этом соединении. Спланируем цепь, и присоединим удалённую таблицу.
        \item Маленькую звезду спланируем DPsize. Для большой - сначала спланируем лучи как цепи, затем будем последовательно присоединять к 
        центру использую GOO (по кардинальности) с центральной фиксированной вершиной.
        \item Плотный граф от $\leq 6$ вершин будем планировать DPsize. Для больших плотных графов GOO/linDP.
    \end{enumerate}
    \item Алгоритмом GOO(по кардинальности) соберём все планы одной компоненты в один результат.
    \item Объединим планы компоненты запроса алгоритмом GOO(по стоимости) с помощью декартового произведения.
\end{enumerate}


\raggedright

\end{flushleft}
\end{document}
